import requests
import time
import json

# 171691064
t = 0.35
TOKEN = '73eaea320bdc0d3299faa475c196cfea1c4df9da4c6d291633f9fe8f83c08c4de2a3abf89fbc3ed8a44e1'

class User:
    def __init__(self, token):
        self.token = token

    def get_params(self):
        return {
            'access_token': self.token,
            'v': '5.52'

        }

    def request(self, method, params):
        response = requests.get(
            'https://api.vk.com/method/' + method,
            params=params
        )
        return response
    time.sleep(t)
    
#Функция для запроса всех друзей у пользователя.

    def friends_request(self):
        params = self.get_params()
        response = self.request(
            'friends.get',
            params=params
        )
        return response.json()['response']['items']

#Функция для запроса всех групп у пользователя.
   
    def groups_request(self):

        params = self.get_params()
        response = self.request(
            'groups.get',
            params=params,

        )
        return response.json()['response']['items']

    def groups_mutual(self):

        params = self.get_params_groupe()
        response = self.request(
            'groups.getMembers',
            params=params
        )
        return response.json()['response']['items']



user_id = User(TOKEN)
friends = user_id.friends_request()
friends_lists = friends


groups = user_id.groups_request()
#mutual_groups = friends.groups_mutual()


# for id in friends:
#     groups_for_id = id.groups_mutual()
#     print (groups_for_id)

print("Группы у пользователя с ID 171691064", groups)
print(" ")
#rint(friends_lists)
print("Друзья у пользователя с ID 171691064", friends)


# #сохраняем в json
# # with open('groups.json', 'w', encoding='utf-8') as fh:  # открываем файл на запись
# #     fh.write(json.dumps(groups, ensure_ascii=False))  # преобразовываем словарь data в unicode-строку и записываем в файл
#



